@model IEnumerable<MileageClaim>
@{
    ViewData["Title"] = "My Mileage Claims";
}

<div class="container" style="max-width: 1280px; margin: 0 auto; padding: 1.5rem;">
    <!-- Header Card -->
    <div class="custom-card mb-4" style="padding: 1.5rem;">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1 class="text-dark-custom" style="font-size: 1.875rem; font-weight: 700; margin-bottom: 0.25rem;">Mileage Claims</h1>
                <p class="text-muted-custom" style="margin: 0; font-size: 1rem;">Track and submit your mileage reimbursement claims</p>
            </div>
            <a asp-action="Create" class="btn-primary-custom text-decoration-none d-flex align-items-center gap-2">
                <i class="bi bi-plus-circle"></i>
                New Claim
            </a>
        </div>
    </div>

    <!-- Success/Error Messages -->
    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show custom-card mb-4" role="alert">
            @TempData["Success"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <!-- Claims List -->
    @if (!Model.Any())
    {
        <div class="custom-card text-center" style="padding: 5rem 1.5rem;">
            <i class="bi bi-file-earmark-text" style="font-size: 3rem; color: var(--gray-300);"></i>
            <h4 class="mt-3 text-muted-custom">No Claims Yet</h4>
            <p class="text-muted-custom">Create your first mileage claim to get started.</p>
            <a asp-action="Create" class="btn-primary-custom text-decoration-none mt-2 d-inline-block">Create Claim</a>
        </div>
    }
    else
    {
        <div class="d-flex flex-column gap-3">
            @foreach (var claim in Model)
            {
                <div class="custom-card" style="padding: 1.5rem;">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <div class="d-flex align-items-center gap-3 mb-2">
                                <h3 class="text-dark-custom mb-0" style="font-size: 1.125rem; font-weight: 600;">
                                    @claim.StartDate.ToString("MMM dd, yyyy") to @claim.EndDate.ToString("MMM dd, yyyy")
                                </h3>
                                @{
                                    // var statusClass = claim.Status switch
                                    // {
                                    //     "Draft" => "status-draft",
                                    //     "Submitted" => "status-submitted",
                                    //     "Approved" => "status-approved",
                                    //     "Rejected" => "status-rejected",
                                    //     _ => "status-draft"
                                    // };
                                }
                                @* <span class="status-badge @statusClass">@claim.Status</span> *@
                            </div>
                            <div class="row" style="font-size: 0.875rem;">
                                <div class="col-md-4">
                                    <span class="text-muted-custom">Total Distance:</span>
                                    <span class="ms-2 text-dark-custom fw-medium">@claim.TotalKilometers.ToString() km</span>
                                </div>
                                <div class="col-md-4">
                                    <span class="text-muted-custom">Reimbursement:</span>
                                    <span class="ms-2 text-dark-custom fw-medium">$@claim.TotalReimbursement.ToString()</span>
                                </div>
                                <div class="col-md-4">
                                    <span class="text-muted-custom">Trips:</span>
                                    <span class="ms-2 text-dark-custom fw-medium">@claim.Trips.Count</span>
                                </div>
                            </div>
                            @if (claim.SubmittedAt != null)
                            {
                                <p class="text-muted-custom mb-0 mt-2" style="font-size: 0.875rem;">
                                    Submitted: @claim.SubmittedAt?.ToString("MMM dd, yyyy")
                                </p>
                            }
                            @* @if (claim.DecisionAt != null) *@
                            @* { *@
                            @*     <p class="text-muted-custom mb-0 mt-1" style="font-size: 0.875rem;"> *@
                            @*         Decision: @claim.DecisionAt?.ToString("MMM dd, yyyy") *@
                            @*     </p> *@
                            @* } *@
                        </div>
                        <a asp-action="Edit" asp-route-id="@claim.Id" class="text-decoration-none fw-medium d-flex align-items-center gap-1"
                           style="color: var(--blue-600);">
                            View Details
                            <i class="bi bi-file-text" style="font-size: 1rem;"></i>
                        </a>
                    </div>
                </div>
            }
        </div>
    }
</div>